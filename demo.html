<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Demo Page</title>
    </head>
    <body>
        <img class="crop-me" src="kitteh.jpg" alt="It's a Kitteh">
        <input type="number" step=".1" min="0" id="ratio-setter">
        <button id="button" role="button">Button</button>
        <script src="imagecrop.js"></script>
        <script>
            var createImageCrop = function (image) {
                var cropped = new ImageCrop({
                    image: image,
                    opacity: 0.6,
                    outputWidth: 1920,
                    outputHeight: 1080
                });

                document.querySelector('#button').addEventListener('click', function () {
                    window.open(cropped.save());
                });
                document.querySelector('#ratio-setter').addEventListener('keyup', function (e) {
                    cropped.set('ratio', parseFloat(e.target.value));
                });
            };

            var image = document.querySelector('.crop-me');

            if (image.complete) {
                createImageCrop(image);
            } else {
                image.addEventListener('load', function () {
                    createImageCrop(image);
                });
            }
        </script>
    </body>
</html>